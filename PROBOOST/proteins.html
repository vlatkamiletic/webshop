<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PROBOOST - Proteini</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/styler.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">PROBOOST</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="proteins.html">Proteini</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="vitamins.html">Vitamini</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="snacks.html">Snacks</a>
                    </li>
                </ul>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#signInModal">Prijava</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#cartModal">Košarica</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Filtri -->
    <div class="filters">
        <div class="filter-price">
            <label for="priceRange">Cijena:</label>
            <input type="range" id="priceRange" min="0" max="50" step="1" value="50">
            <span id="priceValue">0€ - 50€</span>
        </div>
        <div class="filter-vegan">
            <label for="veganFilter"></label>
            <input type="checkbox" id="veganFilter"> 
            <span>Veganski proizvodi</span>
        </div>
    </div>

    <div class="container mt-4">
        <h2 class="text-light">Premium proteini za vaše mišiće</h2>
        <p class="text-light">Otkrijte našu ponudu proteina vrhunske kvalitete za optimalan rast i oporavak mišića!</p>
    </div>

    
    <div class="container mt-4">
        <h2 class="text-center text-light">Otkrijte ponudu naših proteina!</h2>
            
        <div class="container mt-4">
            <div class="row">

                <!-- Protein Product 1 -->
                <div class="col-md-4 product" data-price="19.99" data-vegan="false">
                    <div class="card text-center">
                        <img src="pic\Protein1.webp" class="card-img-top product-img" alt="100% WHEY PROTEIN PROFESSIONAL">
                        <div class="card-body">
                            <h5 class="card-title">Whey protein</h5>
                            <p class="card-text">100% WHEY PROTEIN PROFESSIONAL</p>
                            <h5 class="card-text">19.99€</h5>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <div class="input-group" style="max-width: 110px;">
                                    <button class="btn btn-outline-secondary" type="button" id="decrease">-</button>
                                    <input type="number" class="form-control" value="1" min="1" max="10" step="1" id="spinnerInput">
                                    <button class="btn btn-outline-secondary" type="button" id="increase">+</button>
                                </div>
                                <button class="btn btn-primary add-to-cart-btn" data-product-name="Whey protein" data-product-price="19.99€">Dodaj u košaricu</button>
                            </div>
                        </div>
                    </div>
                </div>

                
                <!-- Protein Product 2 -->
                <div class="col-md-4 product" data-price="24.99" data-vegan="false">
                    <div class="card text-center">
                        <img src="pic/Protein2.webp" class="card-img-top product-img" alt="100% CASEIN COMPLEX">
                        <div class="card-body">
                            <h5 class="card-title">Kazein protein</h5>
                            <p class="card-text">100% CASEIN COMPLEX</p>
                            <h5 class="card-text">24.99€</h5>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <div class="input-group" style="max-width: 110px;">
                                    <button class="btn btn-outline-secondary" type="button" id="decrease">-</button>
                                    <input type="number" class="form-control" value="1" min="1" max="10" step="1" id="spinnerInput">
                                    <button class="btn btn-outline-secondary" type="button" id="increase">+</button>
                                </div>
                                <button class="btn btn-primary add-to-cart-btn" data-product-name="Kazein protein" data-product-price="24.99€">Dodaj u košaricu</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Protein Product 3 -->
                <div class="col-md-4 product" data-price="23.99" data-vegan="true">
                    <div class="card text-center">
                        <img src="pic\Protein3.webp" class="card-img-top product-img" alt="100% VEGAN PROTEIN">
                        <div class="card-body">
                            <h5 class="card-title">Veganski protein</h5>
                            <p class="card-text">100% VEGAN PROTEIN</p>
                            <h5 class="card-text">23.99€</h5>
                            <div class="d-flex justify-content-center align-items-center mb-3">
                                <div class="input-group" style="max-width: 110px;">
                                    <button class="btn btn-outline-secondary" type="button" id="decrease">-</button>
                                    <input type="number" class="form-control" value="1" min="1" max="10" step="1" id="spinnerInput">
                                    <button class="btn btn-outline-secondary" type="button" id="increase">+</button>
                                </div>
                                <button class="btn btn-primary add-to-cart-btn" data-product-name="Veganski protein" data-product-price="23.99€">Dodaj u košaricu</button>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>


    <!-- Sign In Modal -->
    <div class="modal fade" id="signInModal" tabindex="-1" aria-labelledby="signInModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="signInModalLabel">Prijavi se</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Lozinka</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="password" required>
                                <button type="button" class="btn btn-outline-secondary" id="togglePassword">Prikaži</button>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Prijavi se</button>
                    </form>
                    <p class="mt-2">Nemaš račun? <a href="#" data-bs-toggle="modal" data-bs-target="#registerModal" data-bs-dismiss="modal" class="text-primary">Registriraj se</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Registriraj se</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="name" class="form-label">Ime</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="mb-3">
                            <label for="surname" class="form-label">Prezime</label>
                            <input type="text" class="form-control" id="surname" required>
                        </div>
                        <div class="mb-3">
                            <label for="regEmail" class="form-label">Email</label>
                            <input type="email" class="form-control" id="regEmail" required>
                        </div>
                        <div class="mb-3">
                            <label for="regPassword" class="form-label">Lozinka</label>
                            <div class="input-group">
                                <input type="password" class="form-control" id="regPassword" required>
                                <button type="button" class="btn btn-outline-secondary" id="toggleRegPassword">Prikaži</button>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Registriraj se</button>
                    </form>
                    <p class="mt-2">Već imaš račun? <a href="#" data-bs-toggle="modal" data-bs-target="#signInModal" data-bs-dismiss="modal" class="text-primary">Prijavi se</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1" aria-labelledby="cartModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="cartModalLabel">Tvoja košarica</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul id="cartItemsList">
                        <li>Tvoja košarica je prazna.</li>
                    </ul>
                    <p id="totalPrice">Ukupna cijena: 0.00€</p> <!-- Prikaz ukupne cijene -->
                </div>
                    
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Zatvori</button>
                    <button type="button" class="btn btn-primary" id="checkoutButton">Nastavi na naplatu</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <!-- <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const priceRange = document.getElementById('priceRange');
            const priceValue = document.getElementById('priceValue');
            const veganFilter = document.getElementById('veganFilter');
            const products = document.querySelectorAll('.product');

            // Funkcija za filtriranje proizvoda
            function filterProducts() {
                const maxPrice = parseFloat(priceRange.value);
                const isVegan = veganFilter.checked;

                products.forEach(product => {
                    const productPrice = parseFloat(product.getAttribute('data-price'));
                    const productIsVegan = product.getAttribute('data-vegan') === 'true';

                    // Provjera uvjeta filtriranja
                    if (productPrice <= maxPrice && (!isVegan || productIsVegan)) {
                        product.style.display = 'block';  // Prikazivanje proizvoda
                    } else {
                        product.style.display = 'none';  // Skrivanje proizvoda koji ne zadovoljavaju filter
                    }
                });

                priceValue.textContent = `0€ - ${maxPrice}€`;  // Ažuriranje prikaza cijene
            }

            // Pokretanje filtriranja kad god se promijene filteri
            priceRange.addEventListener('input', filterProducts);
            veganFilter.addEventListener('change', filterProducts);

            filterProducts();  // Pokretanje filtriranja pri učitavanju stranice
        });


        document.addEventListener('DOMContentLoaded', function () {
            // Toggle password visibility for login form
            const togglePassword = document.getElementById('togglePassword');
            const passwordInput = document.getElementById('password');
    
            if (togglePassword) {
                togglePassword.addEventListener('mousedown', function () {
                    passwordInput.type = 'text';
                });
    
                togglePassword.addEventListener('mouseup', function () {
                    passwordInput.type = 'password';
                });
    
                togglePassword.addEventListener('mouseleave', function () {
                    passwordInput.type = 'password';
                });
            }
    
            // Toggle password visibility for registration form
            const toggleRegPassword = document.getElementById('toggleRegPassword');
            const regPasswordInput = document.getElementById('regPassword');
    
            if (toggleRegPassword) {
                toggleRegPassword.addEventListener('mousedown', function () {
                    regPasswordInput.type = 'text';
                });
    
                toggleRegPassword.addEventListener('mouseup', function () {
                    regPasswordInput.type = 'password';
                });
    
                toggleRegPassword.addEventListener('mouseleave', function () {
                    regPasswordInput.type = 'password';
                });
            }
    
            // Spinner za povećavanje i smanjivanje količine
            const increaseBtns = document.querySelectorAll('.btn[id="increase"]');
            const decreaseBtns = document.querySelectorAll('.btn[id="decrease"]');
    
            increaseBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const input = e.target.closest('.input-group').querySelector('input');
                    const currentValue = parseInt(input.value);
                    const max = parseInt(input.max);
                    const step = parseInt(input.step);
                    if (!isNaN(currentValue) && (!max || currentValue + step <= max)) {
                        input.value = currentValue + step;
                    }
                });
            });
    
            decreaseBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const input = e.target.closest('.input-group').querySelector('input');
                    const currentValue = parseInt(input.value);
                    const min = parseInt(input.min);
                    const step = parseInt(input.step);
                    if (!isNaN(currentValue) && (!min || currentValue - step >= min)) {
                        input.value = currentValue - step;
                    }
                });
            });
    
            // Košarica i session storage
            let cart = JSON.parse(sessionStorage.getItem('cart')) || [];
            let totalPrice = 0;
    
            // Dodavanje proizvoda u košaricu
            const addToCartBtns = document.querySelectorAll('.add-to-cart-btn');
    
            addToCartBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const productCard = e.target.closest('.card');
                    const productName = btn.getAttribute('data-product-name');
                    const productPrice = parseFloat(btn.getAttribute('data-product-price'));
                    const quantityInput = productCard.querySelector('input[type="number"]');
                    const quantity = parseInt(quantityInput ? quantityInput.value : 1);
    
                    addToCart(productName, productPrice, quantity);
                });
            });
    
            function addToCart(productName, productPrice, quantity) {
                const existingProduct = cart.find(item => item.name === productName);
    
                if (existingProduct) {
                    existingProduct.quantity += quantity; // Povećaj količinu ako proizvod već postoji
                } else {
                    cart.push({ name: productName, price: productPrice, quantity });
                }
    
                saveCartToSessionStorage(); // Spremanje u Session Storage
                updateCartModal();
            }
    
            // Funkcija za spremanje košarice u Session Storage
            function saveCartToSessionStorage() {
                sessionStorage.setItem('cart', JSON.stringify(cart));
            }
    
            // Ažuriranje sadržaja modalnog prozora košarice
            function updateCartModal() {
                const cartItemsList = document.getElementById('cartItemsList');
                const checkoutButton = document.getElementById('checkoutButton');
                const totalPriceElement = document.getElementById('totalPrice');
    
                if (cart.length === 0) {
                    cartItemsList.innerHTML = '<li>Tvoja košarica je prazna.</li>';
                    totalPriceElement.textContent = 'Ukupna cijena: 0.00€';
                    checkoutButton.disabled = true;
                } else {
                    cartItemsList.innerHTML = '';
                    totalPrice = 0;
    
                    cart.forEach(item => {
                        const li = document.createElement('li');
                        li.textContent = `${item.name} - ${item.quantity} x ${item.price.toFixed(2)}€`;
                        cartItemsList.appendChild(li);
                        totalPrice += item.price * item.quantity;
                    });
    
                    totalPriceElement.textContent = `Ukupna cijena: ${totalPrice.toFixed(2)}€`;
                    checkoutButton.disabled = false;
                }
            }
    
            // Gumb za plaćanje
            const checkoutButton = document.getElementById('checkoutButton');
            checkoutButton.addEventListener('click', () => {
                if (cart.length > 0) {
                    alert('Plaćanje trenutno nije implementirano. Hvala na kupovini!');
                } else {
                    alert('Košarica je prazna.');
                }
            });
    
            // Inicijalno ažuriraj modal košarice nakon učitavanja stranice
            updateCartModal();
        });
    </script>
?    

</body>
</html>